Spotifyify
=========
A pair of bookmarklets for launching Spotify with playlists based on the current page text.  I wrote one to parse radio station playlists, search, and launch a playlist of all available songs in Spotify.  When I searched for the only name that made sense, I found that someone had already written a bookmarklet to turn the selected text into an album link, so the two are now together.

Spotifyify Album:
A simple bit of javascript for turning selected text into a spotify album link.  Intended to be used as a bookmarklet.  It needs to be loaded by a bookmarklet as an external script because it makes spotify metadata API requests.  Takes selected text on a page and makes a spotify album search request.  If it finds any results, inserts the best matching result as a link into the page and opens the matching album in Spotify.

Spotifyify Playlists:
Finds a playlist on the page, parses out artist and track names, and looks them up in Spotify.  Outlines each song as it searches - blue means in progress, green means found, and red means not found.  Currently works on BBC BBC Radio 6 and WMBR playlists, but can be extended to any listings with a regular format. 

How to use
----------
For the album launcher, use this bookmarklet:

    javascript:(function()%7Bfunction%20callback()%7BspotifyifySelection()%7Dvar%20s%3Ddocument.createElement(%22script%22)%3Bs.src%3D%22https%3A%2F%2Fraw.github.com%2Frickychang%2Fspotifyify%2Fmaster%2Fspotifyify.js%22%3Bif(s.addEventListener)%7Bs.addEventListener(%22load%22%2Ccallback%2Cfalse)%7Delse%20if(s.readyState)%7Bs.onreadystatechange%3Dcallback%7Ddocument.body.appendChild(s)%3B%7D)();

Select text on a page and click the bookmarklet.  The album you intended to find just might open up in spotify and your selected text is now a link to that album.  Currently, it just opens the first (best?) result from the spotify API.  If spotify doesn't return any matches for your query, no action is taken.  Note: bookmarklet generated by mrcoles' [bookmarklet creator](http://mrcoles.com/bookmarklet/).

For the playlist parser, use this one:

    javascript:(function()%7Bfunction%20callback()%7BspotifyifyLists()%7Dvar%20s%3Ddocument.createElement(%22script%22)%3Bs.src%3D%22https%3A%2F%2Fraw.github.com%2Fejegg%2Fspotifyify%2Fmaster%2Fspotifyify.js%22%3Bif(s.addEventListener)%7Bs.addEventListener(%22load%22%2Ccallback%2Cfalse)%7Delse%20if(s.readyState)%7Bs.onreadystatechange%3Dcallback%7Ddocument.body.appendChild(s)%3B%7D)();

When you're on a WMBR (http://track-blaster.com/wmbr/) or BBC Radio 6 playlist page (e.g. http://www.bbc.co.uk/programmes/b0393041), just click the link and watch it go.  After 10 sec or so, it should launch Spotify with all the songs it could find.

Issues
------

Spotify metadata API kind of sucks.  You have to make different types of API calls to find matching artists, albums, and tracks so you can't really just highlight arbitrary text and ask spotify find the best matching spotify URI for you.  That's why I'm just doing an album search and opening up the best match found right now.  In particular, if you select the artist name and an album title, it often doesn't return anything.  Some more complicated logic for parsing the results you get back and figuring out how good of a match was found before opening the album might help.  Also, I don't believe you can specify how many results to return per page.  I can't find documentation or a parameter that sets a limit so the API returns up to 100 albums per call as a default.

Radio DJs often list things differently than Spotify does.  The playlist parser needs an ajax error handler - right now it will just hang if one of the track searches doesn't come back right.

